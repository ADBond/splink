# Cluster Evaluation

Graphs provide a natural way to think about linked data. Visualising linked data as a graph and utilising graph metrics are powerful routes to assessing linkage quality, as well as enhancing understanding of datasets and models. Insights gained can be used to refine linking strategies, resulting in more accurate predictions.

Graph metrics (see below) can be particularly useful for obtaining an overall picture of the quality of clusters generated by a Splink model. For example‚Ä¶

At the individual cluster level, Splink‚Äôs [Cluster Studio Dashboard]() enables users to visualise clusters and interrogate their members and the links between them. Applying metrics to individual clusters can be useful for analysing graphs with many nodes when it can be impossible to spot spurious links by eye alone.

!!! note
    It is important to bear in mind that whilst graph metrics can be very useful for assessing linkage quality, they are rarely definitive, especially when taken in isolation. It is often helpful to consider multiple metrics in conjunction with one another to build a comprehensive picture. 
    
    It is also important to consider metrics within the context of their distribution and the underlying dataset. For example: a cluster density (see below) of 0.4 might seem low but could actually be above average for the dataset in question; a cluster of size 80 might be suspiciously large for one dataset but not for another.


Where do we answer the question of: what does good look like?

## Graph metrics and their application to linked data

A graph is defined as a collection of points (nodes) connected by lines (edges). In data linking, we refer to these collections of nodes as clusters, within which the nodes represent the entity to be linked (e.g. person or journey) and the edges represent a potential match, together with an associated Splink score.

[Include picture]

Graph metrics quantify the characteristics of a graph. A simple example of a graph metric is cluster size which is the number of nodes in a cluster.

For data linking with Splink, it is useful to sort graph metrics into three categories: cluster metrics, node metrics and edge metrics. These are defined below together with their relevance to data linking.

### :fontawesome-solid-circle-nodes: Cluster metrics

Cluster metrics refer to characteristics of a cluster as a whole, rather than the individual nodes and edges it contains.

#### Example: density
[picture]

The density of a cluster is given by the number of edges a cluster contains divided by the maximum possible number of edges. Density ranges from 0 to 1. A density of 1 means that all nodes are connected to all other nodes in a cluster.

Relevance to data linking: A high density (close to 1) is generally good as it means there are many edges in support of the records in a cluster being linked. A low density score might warrant further investigation.

#### Example: cluster centralisation

TBC

### ‚ö´Ô∏è Node metrics

Node metrics refer to features of the nodes within clusters; for example, node degree which is a count of how many edges (links) are joined to a node.
Example: node degree

### üîó Edge metrics

These are a measure of the properties of edges within a cluster. Examples include edge betweeness and bridges*

#### Example: is bridge

*acknowledge the slight difference between our definition and the literature.

## ‚ö° How to harness the power of graph metrics with Splink ##

To enable users to calculate a variety of graph metrics for their linked data, Splink provides the `compute_graph_metrics()` method.

Other possible things to include:
Querying with linker.sql_query?
We have also made one of the metrics computed so far available to use for sampling in cluster studio dashboard?
