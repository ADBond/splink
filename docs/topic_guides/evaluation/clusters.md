# Cluster Evaluation

Graphs provide a natural way to think about linked data. Visualising linked data as a graph and employing graph metrics are powerful ways to evaluate linkage quality. Insights gained can be used to refine linking strategies, resulting in more accurate predictions.

Graph metrics can give a big-picture view of the quality of clusters generated by a Splink model.
For example, a distribution of cluster densities can help us understand whether clusters are unexpectedly sparse, potentially indicating missed links across the board.

Metrics can also help home in on problematic clusters, such as those containing inaccurate links. For instance, analysing cluster sizes can reveal outliers, like exceptionally large clusters, that may require closer examination.

Splink‚Äôs [Cluster Studio Dashboard]() empowers users to visualise individual clusters and interrogate the links between their member records. Applying metrics at the individual cluster level within the Dashboard is also useful; for example, for analysing large clusters containing many nodes where it can be impossible to spot spurious links by eye alone.

!!! note
    It is important to bear in mind that whilst graph metrics can be very useful for assessing linkage quality, they are rarely definitive, especially when taken in isolation. A more comprehensive picture can be built by considering various metrics in conjunction with one another.
    
    It is also important to consider metrics within the context of their distribution and the underlying dataset. For example: a cluster density (see below) of 0.4 might seem low but could actually be above average for the dataset in question; a cluster of size 80 might be suspiciously large for one dataset but not for another.

## Graphs and graph metrics

For clarity, let us first define what we mean by a graph. A graph is a collection of points (nodes) connected by lines (edges). In data linking, we refer to these collections of nodes as clusters, within which the nodes represent the entity to be linked (e.g. person or journey) and the edges represent a potential match, together with an associated Splink score.

[Include picture here]

Graph metrics quantify the characteristics of a graph (a cluster). A simple example of a graph metric is cluster size which is the number of nodes in a cluster.

For data linking with Splink, it is useful to sort graph metrics into three categories: cluster metrics, node metrics and edge metrics. These are defined below together with examples of each and their application to linked data. The examples given are of all metrics currently available in Splink.

### :fontawesome-solid-circle-nodes: Cluster metrics

Cluster metrics refer to the characteristics of a cluster as a whole, rather than the individual nodes and edges it contains.

#### Example: density

The density of a cluster is given by the number of edges a cluster contains divided by the maximum possible number of edges. Density ranges from 0 to 1. A density of 1 means that all nodes are connected to all other nodes in a cluster.

[picture: edges vs max possible edges]

When examining linked data, a high density (close to 1) is generally considered good as it means there are many edges in support of the records in a cluster being linked. A low density score could indicate links being missed, which could happen, for example, if blocking rules are too tight or the clustering threshold is too high.



#### Example: cluster centralisation

TBC

### ‚ö´Ô∏è Node metrics

Node metrics refer to features of the nodes within clusters; for example, node degree which is a count of how many edges (links) are joined to a node.

#### Example: node degree

### üîó Edge metrics

These are a measure of the properties of edges within a cluster. Examples include edge betweeness and bridges*

#### Example: 'is bridge'

*acknowledge the slight difference between our definition and the literature.

## How to apply graph metrics

Trying to answer the question of 'what does good look like?'
Specific example of applying graph metrics and feeding back into a linking strategy
(Might be for future if we can give enough guidance above for now)
How to combine graph metrics
Communicate that it's an iterative process of feedback, which builds up expectations
Metrics don't 

## ‚ö° How to compute graph metrics with Splink

To enable users to calculate a variety of graph metrics for their linked data, Splink provides the `compute_graph_metrics()` method.


